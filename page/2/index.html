<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"congpeijun.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="https://congpeijun.com/page/2/index.html">
<meta property="og:site_name" content="Hello World">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="丛培君">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://congpeijun.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hello World</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hello World</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Just So So ...</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about-me/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="丛培君"
      src="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
  <p class="site-author-name" itemprop="name">丛培君</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">38</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/congpeijun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;congpeijun" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/virtualbox-network-setting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/virtualbox-network-setting/" class="post-title-link" itemprop="url">VirtualBox虚拟机网络设置（四种方式）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-26 20:57:00" itemprop="dateCreated datePublished" datetime="2012-06-26T20:57:00+08:00">2012-06-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="VirtualBox的提供了四种网络接入模式，它们分别是："><a href="#VirtualBox的提供了四种网络接入模式，它们分别是：" class="headerlink" title="VirtualBox的提供了四种网络接入模式，它们分别是："></a>VirtualBox的提供了四种网络接入模式，它们分别是：</h1><p>1、NAT 网络地址转换模式(NAT,Network Address Translation)<br>2、Bridged Adapter 桥接模式<br>3、Internal 内部网络模式<br>4、Host-only Adapter 主机模式</p>
<h2 id="第一种-NAT模式"><a href="#第一种-NAT模式" class="headerlink" title="第一种 NAT模式"></a>第一种 NAT模式</h2><p>解释：<br>NAT模式是最简单的实现虚拟机上网的方式，你可以这样理解：Vhost访问网络的所有数据都是由主机提供的，vhost并不真实存在于网络中，主机与网络中的任何机器都不能查看和访问到Vhost的存在。<br>虚拟机与主机关系：<br>只能单向访问，虚拟机可以通过网络访问到主机，主机无法通过网络访问到虚拟机。<br>虚拟机与网络中其他主机的关系：<br>只能单向访问，虚拟机可以访问到网络中其他主机，其他主机不能通过网络访问到虚拟机。<br>虚拟机与虚拟机之间的关系：<br>相互不能访问，虚拟机与虚拟机各自完全独立，相互间无法通过网络访问彼此。<br>IP:10.0.2.15<br>网关：10.0.2.2<br>DNS：10.0.2.3<br>一台虚拟机的多个网卡可以被设定使用 NAT， 第一个网卡连接了到专用网 10.0.2.0，第二个网卡连接到专用网络 10.0.3.0，等等。默认得到的客户端ip（IP Address）是10.0.2.15，网关（Gateway）是10.0.2.2，域名服务器（DNS）是10.0.2.3，可以手动参考这个进行修改。<br>NAT方案优缺点：<br>笔记本已插网线时： 虚拟机可以访问主机，虚拟机可以访问互联网，在做了端口映射后（最后有说明），主机可以访问虚拟机上的服务（如数据库）。<br>笔记本没插网线时： 主机的“本地连接”有红叉的，虚拟机可以访问主机，虚拟机不可以访问互联网，在做了端口映射后，主机可以访问虚拟机上的服务（如数据库）。</p>
<h2 id="第二种-Bridged-Adapter模式"><a href="#第二种-Bridged-Adapter模式" class="headerlink" title="第二种 Bridged Adapter模式"></a>第二种 Bridged Adapter模式</h2><p>解释：<br>网桥模式是我最喜欢的用的一种模式，同时，模拟度也是相当完美。你可以这样理解，它是通过主机网卡，架设了一条桥，直接连入到网络中了。因此，它使得虚拟机能被分配到一个网络中独立的IP，所有网络功能完全和在网络中的真实机器一样。<br>虚拟机与主机关系：<br>可以相互访问，因为虚拟机在真实网络段中有独立IP，主机与虚拟机处于同一网络段中，彼此可以通过各自IP相互访问。<br>虚拟机于网络中其他主机关系：<br>可以相互访问，同样因为虚拟机在真实网络段中有独立IP，虚拟机与所有网络其他主机处于同一网络段中，彼此可以通过各自IP相互访问。<br>虚拟机于虚拟机关系：<br>可以相互访问，原因同上。<br>IP：一般是DHCP分配的，与主机的“本地连接”的IP 是同一网段的。虚拟机就能与主机互相通信。<br>笔记本已插网线时：（若网络中有DHCP服务器）主机与虚拟机会通过DHCP分别得到一个IP，这两个IP在同一网段。 主机与虚拟机可以ping通，虚拟机可以上互联网。<br>笔记本没插网线时：主机与虚拟机不能通信。主机的“本地连接”有红叉，就不能手工指定IP。虚拟机也不能通过DHCP得到IP地址，手工指定IP后，也无法与主机通信，因为主机无IP。<br>这时主机的VirtualBox Host-Only Network 网卡是有ip的，192.168.56.1。虚拟机就算手工指定了IP 192.168.56.*，也ping不能主机。</p>
<h2 id="第三种-Internal模式"><a href="#第三种-Internal模式" class="headerlink" title="第三种 Internal模式"></a>第三种 Internal模式</h2><p>解释：<br>内网模式，顾名思义就是内部网络模式，虚拟机与外网完全断开，只实现虚拟机于虚拟机之间的内部网络模式。<br>虚拟机与主机关系：<br>不能相互访问，彼此不属于同一个网络，无法相互访问。<br>虚拟机与网络中其他主机关系：<br>不能相互访问，理由同上。<br>虚拟机与虚拟机关系：<br>可以相互访问，前提是在设置网络时，两台虚拟机设置同一网络名称。如上配置图中，名称为intnet。<br>IP: VirtualBox的DHCP服务器会为它分配IP ，一般得到的是192.168.56.101，因为是从101起分的，也可手工指定192.168.56.*。<br>笔记本已插网线时：虚拟机可以与主机的VirtualBox Host-Only Network 网卡通信<br>这种方案不受主机本地连接（网卡）是否有红叉的影响。</p>
<h2 id="第四种-Host-only-Adapter模式"><a href="#第四种-Host-only-Adapter模式" class="headerlink" title="第四种 Host-only Adapter模式"></a>第四种 Host-only Adapter模式</h2><p>解释：<br>主机模式，这是一种比较复杂的模式，需要有比较扎实的网络基础知识才能玩转。可以说前面几种模式所实现的功能，在这种模式下，通过虚拟机及网卡的设置都可以被实现。<br>我们可以理解为Vbox在主机中模拟出一张专供虚拟机使用的网卡，所有虚拟机都是连接到该网卡上的，我们可以通过设置这张网卡来实现上网及其他很多功能，比如（网卡共享、网卡桥接等）。<br>虚拟机与主机关系<br>默认不能相互访问，双方不属于同一IP段，host-only网卡默认IP段为192.168.56.X 子网掩码为255.255.255.0，后面的虚拟机被分配到的也都是这个网段。通过网卡共享、网卡桥接等，可以实现虚拟机于主机相互访问。<br>虚拟机与网络主机关系<br>默认不能相互访问，原因同上，通过设置，可以实现相互访问。<br>虚拟机与虚拟机关系<br>默认可以相互访问，都是同处于一个网段。<br>虚拟机访问主机 用的是主机的VirtualBox Host-Only Network网卡的IP：192.168.56.1 ，不管主机“本地连接”有无红叉，永远通。<br>主机访问虚拟机，用是的虚拟机的网卡3的IP： 192.168.56.101 ，不管主机“本地连接”有无红叉，永远通。<br>虚拟机访问互联网，用的是自己的网卡2， 这时主机要能通过“本地连接”有线上网，（无线网卡不行）</p>
<p>通过对以上几种网络模式的了解，我们就可以灵活运用，模拟组建出我们所想要的任何一种网络环境了。<br>比如我想模拟出来一个一台主机，监控一个局域网上网情况的网络环境。<br>首先我开启了两台虚拟机vhost1与vhost2，当然如果硬件允许，我同样可以再增加vhost3、vhost4…<br>所有的vhost我都设置成internat内网模式，网络名称为intnal，网关为192.168.56.100，意思就是通过 192.168.56.100网卡上网。其中有一台vhost1我设置为双网卡，一张为内网模式（192.168.56.100），一张为网桥模式（192.168.1.101）。两张网卡设置双网卡共享上网<br>虚拟机之间为局域网，其中有一台虚拟机vhost1通过与外网相连，所有局域网中的虚拟机又通过vhost1来实现上外网。这样vhost1就可以监控整个虚拟机局域网上网情况了。</p>
<p>NAT 设置端口映射<br><a target="_blank" rel="noopener" href="http://huzhangsheng.blog.163.com/blog/static/34787784200802801435931/">http://huzhangsheng.blog.163.com/blog/static/34787784200802801435931/</a><br>你可以设置一个虚拟机的服务（比如 WEB 服务），通过使用命令行工具 VboxManage 代理。你需要知道虚拟机的服务使用哪个端口，然后决定在主机上使用哪个端口（通常但不总是想要使虚拟机和主机使用同一个端口）。在主机上提供一个服务需要使用一个端口，你能使用在主机上没有准备用来提供服务的任何端口。一个怎样设置新的 NAT 例子，在虚拟机上连接到一个 ssh 服务器，需要下面的三个命令：<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;guestssh&#x2F;Protocol’ TCP<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;guestssh&#x2F;GuestPort’ 22<br>VBoxManage setextradata ‘Linux Guest’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;guestssh&#x2F;HostPort’ 2222<br>说明：VboxManage 是一个命令行程序，请查询你的 VirtualBox 安装目录，’Linux Guest’ 是虚拟主机名。guestssh 是一个自定义的名称，你可以任意设置，通过上面的三个命令，把虚拟机的 22 端口 转发到主机的 2222 端口。<br>又比如，我在虚拟机 debian 上安装了 apache2 服务器，使用 80 端口，映射到主机的 80 端口。使用下面的命令。<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;huzhangsheng&#x2F;Protocol’ TCP<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;huzhangsheng&#x2F;GuestPort’ 80<br>‘C:\Program Files\innotek VirtualBox\VBoxManage.exe’ setextradata ‘debian’ ‘VBoxInternal&#x2F;Devices&#x2F;pcnet&#x2F;0&#x2F;LUN#0&#x2F;Config&#x2F;huzhangsheng&#x2F;HostPort’ 80<br>注意：要使设置生效，请关掉 VirtualBox 再运行虚拟机，我把 VirtualBox 安装在 winxp 上，在虚拟机中安装 debian 4.02r ，虚拟机名是 debian ，并安装了 apache2 php5 mysql-server ，在主机上用IE浏览 <a target="_blank" rel="noopener" href="http://localhost,成功转发到虚拟机/">http://localhost，成功转发到虚拟机</a> debian 的 apache2 web 服务器上</p>
<p>上文出处：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/coltiam/archive/2010/03/26/1696939.html">http://www.cnblogs.com/coltiam/archive/2010/03/26/1696939.html</a></p>
<p>个人感觉通过使用端口映射的方式很不爽，还不如直接桥接来的快，现在多数情况下连接到网络是没问题的，端口映射还需要在宿主跟虚拟机都额外开某个服务，感觉不爽。</p>
<p>“网络”配置页面有4个方案：</p>
<p>1：NAT 网络地址转换（Network Address Translation）</p>
<p>2：Birdged Network 桥接</p>
<p>3：Internal Network 内部网络（可以是虚拟机与虚拟机之间）</p>
<p>4：Host-Only 只与主机通信（大概吧）</p>
<p>安装完VirtualBox2.2后，主机多了一个“VirtualBox Host-Only Network ”本地网卡。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/%E8%BD%AC%E5%90%91archlinux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E8%BD%AC%E5%90%91archlinux/" class="post-title-link" itemprop="url">转向ArchLinux</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-20 19:08:00" itemprop="dateCreated datePublished" datetime="2012-06-20T19:08:00+08:00">2012-06-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>经过两天的折腾，终于把archlinux在我的小黑上顺利安装完毕。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/backup-restore-mysql-database/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/backup-restore-mysql-database/" class="post-title-link" itemprop="url">Mysql 备份还原</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-14 21:44:00" itemprop="dateCreated datePublished" datetime="2012-06-14T21:44:00+08:00">2012-06-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">msyqldump -u root -p dbname table1 table2 &gt; db.sql</span><br><span class="line"></span><br><span class="line">mysql -u root -p dbname &gt; db.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msyqldump -u root -p dbname table1 table2 | gzip &gt; db.sql.gz</span><br><span class="line"></span><br><span class="line">mysql -uroot -p<span class="string">&#x27;passwd&#x27;</span> database &lt; &lt;(zcat database.sql.gz)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/puppet-%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/puppet-%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">Puppet 模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-14 21:26:14" itemprop="dateCreated datePublished" datetime="2012-06-14T21:26:14+08:00">2012-06-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="puppet-模块基础"><a href="#puppet-模块基础" class="headerlink" title="puppet 模块基础"></a>puppet 模块基础</h2><p>puppet模块可以导入，复用都很方便，在这里先回答下之前的两个问题：</p>
<ol>
<li>查看puppet 模块路径，可以使用如下命令：</li>
</ol>
<figure class="highlight plaintext"><figcaption><span>puppetmasterd --configprint modulepath</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/uppet/modules:/usr/share/puppet/modules  #可以看到这两个目录是puppet 模块默认所在的目录。</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>要引用 puppet模块，如果模块所在上面的两个默认的路径可以使用：<br>import “模块名”<br>如果提示模块不存在，比如我在 &#x2F;data&#x2F;modules，那么有两种解决方法：</li>
<li>是修改puppet.conf文件，添加目录到modulepath.举例 ：</li>
</ol>
<p><code>modulepath = /data/modules:/etlc/puppet/modules</code><br>2. 是在引用的是时候用绝对路径。<br>import “&#x2F;data&#x2F;modules&#x2F;模块名”</p>
<p>了解完puppet 模块基础后，接下来就为大家写个简单模块示例：</p>
<p>puppet 模块实例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@s1:/etc/puppet/modules<span class="comment"># cd /etc/puppet/modules</span></span><br><span class="line">root@s1:/etc/puppet/modules<span class="comment"># mkdir -p test/&#123;manifests,files,templates&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这三个目录说明：files目录是用来存放同步远程客户端的文件或者文件夹，manifests目录下放.pp文件，且必须要有init.pp，templates是存放的puppet 模板文件，是以.erb结尾的。</p>
<p>建立init.pp文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/puppet/modules/test/manifests/init.pp</span></span><br><span class="line">class <span class="built_in">test</span>::<span class="built_in">test</span> &#123;</span><br><span class="line">    file &#123; <span class="string">&quot;/tmp/test&quot;</span>:</span><br><span class="line">        owner   =&gt; root,</span><br><span class="line">        group   =&gt; root,</span><br><span class="line">        ensure  =&gt; present,</span><br><span class="line">        content =&gt; <span class="string">&quot;Hello word&quot;</span>,</span><br><span class="line">        mode    =&gt; <span class="string">&quot;0644&quot;</span>,</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在&#x2F;etc&#x2F;puppet&#x2F;manifests&#x2F;site.pp里添加：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node <span class="string">&quot;default&quot;</span> &#123;</span><br><span class="line">    include <span class="built_in">test</span>::<span class="built_in">test</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注：不建议这样操作，实际生产中，我会在site.pp里添加 import “nodes.pp”，然后在nodes.pp里添加上面的内容。</p>
<p>这样我们就建立了我们第一个puppet 模块，在到客户端 c2.inanu.net 上运行puppet查看结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">congpeijun@s2:/tmp$ puppet agent --server s1.ubuntu.local --<span class="built_in">test</span></span><br><span class="line">info: Caching catalog <span class="keyword">for</span> s2.ubuntu.local</span><br><span class="line">info: Applying configuration version <span class="string">&#x27;1339679532&#x27;</span></span><br><span class="line">notice: /Stage[main]/Test/File[/tmp/test]/ensure: created</span><br><span class="line">notice: Finished catalog run <span class="keyword">in</span> 0.05 seconds</span><br><span class="line">congpeijun@s2:/tmp$ <span class="built_in">cat</span> <span class="built_in">test</span></span><br><span class="line">Hello word</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>再次验证，可以看到已经成功运行，已经达到预期的效果。在&#x2F;tmp&#x2F;目录下生成了nanu这个文件，有个问题，不知道大家注意到没有，这里并没有import “test”模块，而直接使用了include test::test类。有兴趣的同学可以试试，再看下效果。</p>
<p>本文参考 <a href="http://www.inanu.net/post/730.html" title="http://www.inanu.net/post/730.html" target="_blank">http://www.inanu.net/post/730.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/%E5%88%A9%E7%94%A8linode-vps-%E6%9E%B6%E8%AE%BEvpn%E6%9C%8D%E5%8A%A1%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%88%A9%E7%94%A8linode-vps-%E6%9E%B6%E8%AE%BEvpn%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">利用linode vps 架设vpn服务器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-09 19:48:00" itemprop="dateCreated datePublished" datetime="2012-06-09T19:48:00+08:00">2012-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>再次吐槽下天国的网络</p>
<p>我的系统为Debian</p>
<h2 id="安装PPTP服务器-以及-iptables"><a href="#安装PPTP服务器-以及-iptables" class="headerlink" title="安装PPTP服务器,以及 iptables"></a>安装PPTP服务器,以及 iptables</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ppp</span><br><span class="line">apt-get install pptpd</span><br><span class="line">apt-get install iptables</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>配置PPTP服务器<br>编辑&#x2F;etc&#x2F;pptpd.conf<br>查找如下内容：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#localip 192.168.0.1</span></span><br><span class="line"><span class="comment">#remoteip 192.168.0.234-238,192.168.0.245</span></span><br></pre></td></tr></table></figure>
替换为：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localip 192.168.183.1 <span class="comment">#这里 应该 和你vps的private 的ip在一个网段。我就是这样弄的。</span></span><br><span class="line">remoteip 192.168.183.234-238,192.168.183.245</span><br></pre></td></tr></table></figure>
上面的两行为VPN服务器的IP和VPN客户端连接后获取到的IP范围。</li>
<li>添加PPTP VPN用户<br>编辑 &#x2F;etc&#x2F;ppp&#x2F;chap-secrets<br>文件 内容如下</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#client        server  secret                  IP addresses</span><br></pre></td></tr></table></figure>

<p>你主要按照上面的内容格式填写就行<br>bash echo “youname pptpd password  *” &gt;&gt; &#x2F;etc&#x2F;ppp&#x2F;chap-secrets&#96;&#96;&#96;</p>
<ol start="4">
<li>修改DNS服务器</li>
</ol>
<p>编辑&#x2F;etc&#x2F;ppp&#x2F;options，添加如下内容<br>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ms-dns 8.8.8.8</span><br><span class="line">ms-dns 8.8.4.4</span><br></pre></td></tr></table></figure>
<p>5.开启ipv4转发 并设定nat转发规则<br>编辑&#x2F;etc&#x2F;sysctl.conf<br>去掉net.ipv4.ip_forward&#x3D;1前的注释</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p <span class="comment">#使更改生效</span></span><br><span class="line"><span class="comment"># 设定nat转发规则</span></span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.183.1/24 -o eth0 -j MASQUERADE</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><p>重启PPTP服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service pptpd restart</span><br></pre></td></tr></table></figure>
</li>
<li><p>拨上VPN上出墙吧</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/ubuntu%E8%AF%AF%E5%88%A0%E5%BD%93%E5%89%8D%E5%86%85%E6%A0%B8%E5%90%8E%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ubuntu%E8%AF%AF%E5%88%A0%E5%BD%93%E5%89%8D%E5%86%85%E6%A0%B8%E5%90%8E%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Ubuntu误删当前内核后的修复方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-07 21:38:01" itemprop="dateCreated datePublished" datetime="2012-06-07T21:38:01+08:00">2012-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>昨天想把ubuntu内核升级后多余的旧内核删除掉,可是不小心连同当前使用的内核一起删除了。这下系统没有了内核，更新后的grub启动列表里也没有了ubuntu。问题貌似很严重。这时，最佳的解决方法应该是不关机，立刻安装新的内核。可是在那个瞬间我突然很二地想到，我要关机看看会出现什么情况。于是关机、重启，然后发现根本没有任何办法进入ubuntu。彻底傻掉。</p>
<p>发现网上有些人和我遇到同样的问题，有的直接不淡定地重装了系统。其实还是有温和的解决方案的。</p>
<p>首先进入liveCD，然后将安装介质中的vmlinuz和initrd文件拷贝到原系统中。我所使用的是kubuntu 11.10，当初是U盘安装的。所需要的文件在安装U盘的casper文件夹中，名字是vmlinuz和initrd.lz。我将两个文件拷贝到原系统的&#x2F;boot中。</p>
<p>然后重启，进入grub的命令行。执行下面的命令引导系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">set</span> root=(hd0,msdos9)</span><br><span class="line"></span><br><span class="line"> linux /vmlinuz root=UUID=xxx ro locale=zh_CN quiet splash</span><br><span class="line"></span><br><span class="line"> initrd /initrd.lz</span><br><span class="line"></span><br><span class="line">boot</span><br></pre></td></tr></table></figure>

<p>其中(hd0,msdos9)是&#x2F;boot挂载的分区，具体的序号因人而异。而xxx表示&#x2F;分区的uuid，可以执行ls -l查看所有的分区及其对应的uuid。</p>
<p>现在可以正常进入系统了。然后安装新的内核，替换掉刚才拷贝进来的山寨版。因为从安装包拷贝进来的内核版本低，缺少部分驱动（我的声卡驱动就有问题），而且日后更新升级可能会不正常。安装内核的方法有两种，一种直接从源安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install linux-headers-x.x.x-xx    <span class="comment">#x代表版本号</span></span><br><span class="line"></span><br><span class="line">apt-get install linux-image</span><br></pre></td></tr></table></figure>

<p>另一种是从官网里下载内核的deb包进行安装。但是我使用这种方法安装后一直无法正常启动，可能是下载的版本不对吧，具体原因不详。</p>
<p>新内核安装完成后重启，系统就恢复了原样。</p>
<p>最后吐个槽。当初听说系统当前使用的内核是无法被删除的，删除时系统会报错。现在发现系统确实会发出警告，可是警告后内核文件照删不误，这个警告的意义未免小了点吧。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/puppet%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E8%A7%A3%E9%87%8A%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/puppet%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E8%A7%A3%E9%87%8A%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">puppet常见错误解释及解决方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-05 21:59:53" itemprop="dateCreated datePublished" datetime="2012-06-05T21:59:53+08:00">2012-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>转自：<a href="http://www.mysqlops.com/2011/11/08/puppet-errors.html" title="http://www.mysqlops.com/2011/11/08/puppet-errors.html" target="_blank">http://www.mysqlops.com/2011/11/08/puppet-errors.html</a></p>
<p>【导读】<br>puppet在运维管理是个自动化的工具，作用非常明显，但是苦于puppet 中文资料不多，puppet学习难度<br>大，在puppet使用过程中，碰到很多各种奇怪的问题，这里是 sky的个人总结的一些puppet常见错误，以<br>及相应的解决方法，也感谢部分群友的分享：坚持创新和Ninja<br>以及再一年等QQ好友，也希望更多的人分享puppet知识，共同进步。<br>【puppet 常见错误列表】<br>1.Failed to retrieve current state of resource: Could not retrieve information from source(s)<br>err: &#x2F;&#x2F;test&#x2F;File[&#x2F;tmp&#x2F;sky]: Failed to retrieve current state of resource: Could not retrieve information from source(s) puppet:&#x2F;&#x2F;&#x2F;test&#x2F;foo at &#x2F;etc&#x2F;puppet&#x2F;modules&#x2F;test&#x2F;manifests&#x2F;init.pp:6<br>解决方法：这是一般大多人犯的问题，这个问题一般是出现在puppetmaster上，大部分是source这个路径没有写对。可以查看init.pp的第6行，<br>一般正确的写法是source &#x3D;&gt; “puppet:&#x2F;&#x2F;&#x2F;test&#x2F;sky”，关于文件服务器的写法，可以参阅之前的sky的文档.<br>2.Could not retrieve information from environment production source(s) puppet:&#x2F;&#x2F;server.puppet.com&#x2F;plugins</p>
<p>解决方法：这是一般都是通过yum或者apt-get安装了puppet，在puppetmaster和客户端的配置文件 里有pluginsync&#x3D;true ,<br>把两端&#x2F;etc&#x2F;puppet.conf里pluginsync&#x3D;true ,改成pluginsync&#x3D;false，并重启puppetmaster即可解决。<br>再补充一种方法，如果不设置pluginsync&#x3D;false，那么就需要到少要建个插件。<br>3.Could not request certificate: undefined method <code>closed?’ err: Could not request certificate: undefined method </code>closed?’ for nil:NilClass Exiting;<br>failed to retrieve certificate and watiforcert is disabled<br>解决方法：a.确保puppet的运行用户是否有权限读ssl认证文件。<br>b.确认防火墙是否打开8140端口。<br>4.Change from absent to file failed<br>err: &#x2F;&#x2F;test&#x2F;File[&#x2F;tmp&#x2F;sky&#x2F;<a href="http://www.mysqlops.com]/ensure">www.mysqlops.com]/ensure</a>: change from absent to file failed: Could not set file on ensure: No such file or directory<br>解决方法：很明显，可能是没有&#x2F;tmp&#x2F;sky这个目录，如果没有，请使用 mkdir -p &#x2F;tmp&#x2F;sky.<br>5.Run of Puppet configuration client already in progress<br>解决方法，很明显，a.可以通过ps -axf|grep puppet是否有puppet进程在运行。如果有，则停掉puppet，再运行，即可。<br>b.没有进程，那有可能puppetdlock存在，则删除之，使用 rm -rf &#x2F;var&#x2F;puppet&#x2F;state&#x2F;puppetdlock<br>6.Change failed … Could not find server<br>err: &#x2F;&#x2F;test&#x2F;File[&#x2F;tmp&#x2F;sky]&#x2F;content: change from {md5}068008008418dff20750a94336318974 to {md5}8db2d67767577c70b1251fd80ad32943 failed: Could not find server puppet<br>解决方法：这是设置了filebucket, 名称为puppet,但并不没有使用真名。在配置文件&#x2F;etc&#x2F;puppet.conf里设置如下：<br>filebucket {<br>puppetmaster: server &#x3D;&gt; “<a target="_blank" rel="noopener" href="http://www.mysqlops.com/">www.mysqlops.com</a>“ # server后面要用全名，即fqdn.<br>}<br>7.Could not retrieve catalog: can’t convert nil into String<br>err: Could not retrieve catalog: can’t convert nil into String at &#x2F;etc&#x2F;puppet&#x2F;modules&#x2F;test&#x2F;manifests&#x2F;init.pp:29 on node web-01.test.com<br>解决方法：确认模板文件是否存在。一般都是文件不存在的时候报的。<br>8.undefined method <code>closed?’ for nil:NilClass err: Could not retrieve catalog from remote server: undefined method </code>closed?’ for nil:NilClas<br>解决方法：经常可能是语法错误，少了双引号或者 大概号什么的。<br>9.certificate verify failed<br>err: &#x2F;File[&#x2F;var&#x2F;lib&#x2F;puppet&#x2F;lib]: Failed to generate additional resources using ‘eval_generate’: SSL_connect returned&#x3D;1 errno&#x3D;0 state&#x3D;SSLv3 read server certificate B: certificate verify failed<br>err: &#x2F;File[&#x2F;var&#x2F;lib&#x2F;puppet&#x2F;lib]: Failed to retrieve current state of resource: SSL_connect returned&#x3D;1 errno&#x3D;0 state&#x3D;SSLv3 read server certificate B: certificate verify failed Could not retrieve file metadata for puppet:&#x2F;&#x2F;puppet.example.com&#x2F;plugins: SSL_connect returned&#x3D;1 errno&#x3D;0 state&#x3D;SSLv3 read server certificate B: certificate verify failed<br>err: Could not retrieve catalog from remote server: SSL_connect returned&#x3D;1 errno&#x3D;0 state&#x3D;SSLv3 read server certificate B: certificate verify failed<br>解决方法：这可能是换了不同的两台puppetmaster服务器引起的。解决方法，删除现有ssl证书。find &#x2F;var&#x2F;lib&#x2F;puppet -type f -print0 |xargs -0r rm<br>10.Could not retrieve catalog from remote server<br>err: Could not retrieve catalog from remote server: No such file or directory - &#x2F;var&#x2F;lib&#x2F;puppet&#x2F;client_yaml&#x2F;catalog<br>解决方法：明显提示，&#x2F;var&#x2F;lib&#x2F;puppet&#x2F;client_yaml&#x2F;可能不存在，没有则创建之。<br>11.no certificate found and waitforcert is disabled<br>warning: peer certificate won’t be verified in this SSL session<br>Exiting; no certificate found and waitforcert is disabled<br>解决方法：    这个是需要puppetmaster端给客户端ssl签名.<br>a.puppetca -l #列出等待签名的客户端<br>b.puppetca -s hostname # hostname 是客户端主机的名字。<br>12.Could not intern from pson: Could not convert from pson: Could not find relationship target ”<br>解决方法：这是一个bug, 针对版本0.25.1.在puppet0.25.5.1版本中可以在&#x2F;etc&#x2F;puppet&#x2F;puppet.conf里添加<br>preferred_serialization_format &#x3D; yaml 即可解决。<br>13.Error 400 on SERVER: No support for http method POST<br>err: Could not retrieve catalog from remote server: Error 400 on SERVER: No support for http method POST<br>解决方法：这个问题可能是puppetmaster是2.6版本，puppet客户端版本是2.7。请记住 ，puppetmaster版本可以大于或者等于客户端的版本。<br>不能小于，互换下puppet角色，即可。<br>14.You cannot specify more than one of content, source, target<br>err: Could not run Puppet configuration client: You cannot specify more than one of content, source, target at &#x2F;etc&#x2F;puppet&#x2F;modules&#x2F;test&#x2F;manifests&#x2F;init.pp:10<br>解决方法：错误提示很显示，不能为一个文件指定多个来源。<br>15.Could not retrieve catalog from remote server: wrong header line format<br>解决方法，可能是模板语法错误，请使用命令检查模板语法，示例：erb -x -T ‘-’ -P  test&#x2F;templates&#x2F;cron&#x2F;cron.erb  |ruby -c<br>16.Cannot override local resource on node<br>err: Could not retrieve catalog from remote server: Error 400 on SERVER: Exported resource skyd[foo] cannot override local resource on node web-01.mysqlops.com<br>解决方法：这个问题，一般是在使用export 虚拟资源的时候会出现，可能是有重复的定义。<br>这可能是由于旧节点，运行puppet clean node。查看数据库。使用下面的sql<br>“select hosts.name from hosts,resources where restype&#x3D;’skyd’ and title&#x3D;’foo’ and hosts.id &#x3D; resources.host_id;”<br>17.Could not render to pson: invalid utf8 byte<br>err: Could not retrieve catalog from remote server: Error 400 on SERVER: Could not render to pson: invalid utf8 byte:<br>解决方法：可能是有无效的utf8字符，可以使用命令：od -c filename 进行检查。<br>18. 在安装dashboad的时候，报<br>RAILS_ENV&#x3D;production db:migrate –trace<br>(in &#x2F;usr&#x2F;local&#x2F;puppet-dashboard)<br>** Invoke db:migrate (first_time)<br>** Invoke environment (first_time)<br>** Execute environment<br>** Execute db:migrate<br>** Invoke db:schema:dump (first_time)<br>** Invoke environment<br>** Execute db:schema:dump<br>rake aborted!<br>undefined method <code>reenable&#39; for &lt;Rake::Task db:schema:dump =&gt; [environment]&gt;:Rake::Task 解决访问，可能是gem版本不对，升级版本，请确认版本是否满足安装dashboad的要求。 19.在执行facter命令的时候报： err: Could not run Puppet configuration client: Could not retrieve local facts: execution expired 解决方法，由于ubuntu升级导致的ec2.rb有新的改动，可以修改/usr/lib/ruby/1.8/facter这个目录下面的ec2.rb文件后从新启动后解决。 具体解决方法如下：1. cd /usr/lib/ruby/1.8/facter                 2. cp ec2.rb&#123;,.</code>date -I&#96;} #备份新的ec2.rb这个文件<br>                3. 从正常执行的主机复制ec2.rb这个文件进行覆盖。或者比较两个文件的不同，进行修改。<br>20.在使用gem 安装的时候会报：<br>ERROR:  Could not find a valid gem ‘rake’ (&gt;&#x3D; 0) in any repository<br>ERROR:  While executing gem … (Gem::RemoteFetcher::FetchError)<br>解决方法：可能是没有gem源，或者无法访问源，大部分是网络问题。<br>可以多添加下几个gem 源来尝试解决：<br>使用命令：<br>gem sources -a <a target="_blank" rel="noopener" href="http://gems.rubyforge.org/">http://gems.rubyforge.org</a><br>gem sources -a <a target="_blank" rel="noopener" href="http://gems.rubyonrails.org/">http://gems.rubyonrails.org</a><br>gem sources -a <a target="_blank" rel="noopener" href="http://gemcutter.org/">http://gemcutter.org</a><br>gem sources -a <a target="_blank" rel="noopener" href="http://rubygems.org/">http://rubygems.org</a><br>添加了上面的四个gem源，希望能解决，另外使用gem 安装的过程比较慢，需要大家耐心点等待提示。<br>21.err: Could not request certificate: Retrieved certificate does not match private key; please remove certificate from server and regenerate it with the current key<br>解决方法：按照下面a-d四个步骤，即可。<br>a.在客户端可以删除rm -rf &#x2F;var&#x2F;lib&#x2F;puppet&#x2F;ssl&#x2F;,<br>b.在puppetmaster端，执行 puppetca -c 客户端主机名<br>c. 客户端在重新生成证书请求: puppet –test –server puppetmaster主机名<br>d.在puppetmaster端，执行 puppetca -s 客户端主机名
 </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/%E5%A4%8D%E5%88%B6%E6%88%96%E5%85%8B%E9%9A%86%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8E%E6%97%A0eth0%E6%88%96eth0%E5%8F%98eth1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%A4%8D%E5%88%B6%E6%88%96%E5%85%8B%E9%9A%86%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%90%8E%E6%97%A0eth0%E6%88%96eth0%E5%8F%98eth1/" class="post-title-link" itemprop="url">复制或克隆虚拟机后无eth0或eth0变eth1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-06-05 20:43:42" itemprop="dateCreated datePublished" datetime="2012-06-05T20:43:42+08:00">2012-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文<a target="_blank" rel="noopener" href="http://blog.csdn.net/cenziboy/article/details/7345539" title="http://blog.csdn.net/cenziboy/article/details/7345539"></a><br>复制或克隆虚拟机后无 eth0 或 eth0 变eth1 ( 同理eth[x] 变 eth[x+1] )解决方法如下：</p>
<p>在虚拟机里直接删除掉文件 &#x2F;etc&#x2F;udev&#x2F;rules.d&#x2F;70-persistent-net.rules</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/msyql-remote-login/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/msyql-remote-login/" class="post-title-link" itemprop="url">msyql无法远程访问的解决方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-04-26 21:21:55" itemprop="dateCreated datePublished" datetime="2012-04-26T21:21:55+08:00">2012-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>先设置mysql的配置  &#x2F;etc&#x2F;mysql&#x2F;my.cnf<br>找到 bind_address 修改后面的ip， 或是 注释掉本行<br>　解决方法：</p>
<p>　　一、改表法。可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p>
<p>　　mysql -u root -pvmwaremysql&gt;use mysql;</p>
<p>　　mysql&gt;update user set host &#x3D; ‘%’ where user &#x3D; ‘root’;</p>
<p>　　mysql&gt;select host, user from user;</p>
<p>　　二、授权法。</p>
<p>　　msyql&gt;GRANT ALL PRIVILEGES ON <em>.</em> TO ‘myuser‘@’%’ IDENTIFIED BY ‘mypassword’ WI TH GRANT OPTION;</p>
<p>　　如果你想允许用户myuser从ip为10.0.1.5的主机连接到mysql服务器，并使用mypassword作为密码</p>
<p>　　mysql&gt;GRANT ALL PRIVILEGES ON <em>.</em> TO ‘myuser‘@’10.0.1.5’ IDENTIFIED BY ‘mypassword’ WITH GRANT OPTION;</p>
<p>　　mysql&gt;FLUSH RIVILEGES</p>
<p>　　使修改生效.就可以了</p>
<p>　　三、授权办法</p>
<p>　　在安装mysql的机器上运行：</p>
<p>　　1、d:&#x2F;mysql&#x2F;bin&#x2F;&gt;mysql -h localhost -u root</p>
<p>　　&#x2F;&#x2F;这样应该可以进入MySQL服务器</p>
<p>　　2、mysql&gt;GRANT ALL PRIVILEGES ON <em>.</em> TO ‘root‘@’%’ WITH GRANT OPTION</p>
<p>　　&#x2F;&#x2F;赋予任何主机访问数据的权限</p>
<p>　　3、mysql&gt;FLUSH PRIVILEGES</p>
<p>　　&#x2F;&#x2F;修改生效</p>
<p>　　4、mysql&gt;EXIT</p>
<p>　　&#x2F;&#x2F;退出MySQL服务器</p>
<p>　　这样就可以在其它任何的主机上以root身份登录啦。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://congpeijun.com/ubuntu%E4%B8%8Bssh%E8%AE%BE%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/881552?v=3&s=460">
      <meta itemprop="name" content="丛培君">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello World">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hello World">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ubuntu%E4%B8%8Bssh%E8%AE%BE%E7%BD%AE/" class="post-title-link" itemprop="url">Ubuntu下SSH设置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2012-04-26 20:30:01" itemprop="dateCreated datePublished" datetime="2012-04-26T20:30:01+08:00">2012-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-10-19 22:18:56" itemprop="dateModified" datetime="2023-10-19T22:18:56+08:00">2023-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li>首先安装ssh服务器</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssh-server</span><br></pre></td></tr></table></figure>

<p>　　然后确认sshserver是否启动了：（或用“netstat -tlp”命令）
　　</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep ssh</span><br></pre></td></tr></table></figure>
<p>　　如果只有ssh-agent那ssh-server还没有启动，需要&#x2F;etc&#x2F;init.d&#x2F;ssh start，如果看到sshd那说明ssh-server已经启动了。</p>
<p>　　ssh-server配置文件位于&#x2F; etc&#x2F;ssh&#x2F;sshd_config，在这里可以定义SSH的服务端口，默认端口是22，你可以自己定义成其他端口号，如222。然后重启SSH服务：
　　</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh resart</span><br></pre></td></tr></table></figure>
<p>　　事实上如果没什么特别需求，到这里 OpenSSH Server 就算安装好了。但是进一步设置一下，可以让 OpenSSH 登录时间更短，并且更加安全。这一切都是通过修改 openssh 的配置文件 sshd_config 实现的。<br>　　首先，您刚才实验远程登录的时候可能会发现，在输入完用户名后需要等很长一段时间才会提示输入密码。其实这是由于 sshd 需要反查客户端的 dns 信息导致的。我们可以通过禁用这个特性来大幅提高登录的速度。首先，打开 sshd_config 文件：
　　</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p>　　找到 GSSAPI options 这一节，将下面两行注释掉：</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="comment">#GSSAPIAuthentication yes</span></span><br><span class="line">    <span class="comment">#GSSAPIDelegateCredentials no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```然后重新启动 ssh 服务即可：</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line"></span><br><span class="line">　　sudo /etc/init.d/ssh restart</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```　　再登录试试，应该非常快了吧</span><br><span class="line">　　利用 PuTTy 通过证书认证登录服务器</span><br><span class="line">　　SSH 服务中，所有的内容都是加密传输的，安全性基本有保证。但是如果能使用证书认证的话，安全性将会更上一层楼，而且经过一定的设置，还能实现证书认证自动登录的效果。</span><br><span class="line">　　首先修改 sshd_config 文件，开启证书认证选项：</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line"></span><br><span class="line">　　RSAAuthentication <span class="built_in">yes</span></span><br><span class="line">   PubkeyAuthentication <span class="built_in">yes</span> AuthorizedKeysFile %h/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```修改完成后重新启动 ssh 服务。</span><br><span class="line">　　下一步我们需要为 SSH 用户建立私钥和公钥。首先要登录到需要建立密钥的账户下，这里注意退出 root 用户，需要的话用 su 命令切换到其它用户下。然后运行：</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">　　ssh-keygen</span><br></pre></td></tr></table></figure>
</code></pre>
<p>　　这里，我们将生成的 key 存放在默认目录下即可。建立的过程中会提示输入 passphrase，这相当于给证书加个密码，也是提高安全性的措施，这样即使证书不小心被人拷走也不怕了。当然如果这个留空的话，后面即可实现 PuTTy 通过证书认证的自动登录。<br>　　ssh-keygen 命令会生成两个密钥，首先我们需要将公钥改名留在服务器上：
　　</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh <span class="built_in">mv</span> id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure>
<p>然后将私钥 id_rsa 从服务器上复制出来，并删除掉服务器上的 id_rsa 文件。<br>　　服务器上的设置就做完了，下面的步骤需要在客户端电脑上来做。首先，我们需要将 id_rsa 文件转化为 PuTTy 支持的格式。这里我们需要利用 PuTTyGEN 这个工具：<br>　　点击 PuTTyGen 界面中的 Load 按钮，选择 id_rsa 文件，输入 passphrase（如果有的话），然后再点击 Save PrivateKey 按钮，这样 PuTTy 接受的私钥就做好了。<br>　　打开 PuTTy，在 Session 中输入服务器的 IP 地址，在 Connection-&gt;SSH-&gt;Auth 下点击 Browse 按钮，选择刚才生成好的私钥。然后回到 Connection 选项，在 Auto-login username 中输入证书所属的用户名。回到 Session 选项卡，输入个名字点 Save 保存下这个 Session。点击底部的 Open 应该就可以通过证书认证登录到服务器了。如果有 passphrase 的话，登录过程中会要求输入 passphrase，否则将会直接登录到服务器上，非常的方便。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">丛培君</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
